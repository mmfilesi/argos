{"version":3,"sources":["argos-api-rest.js","argos-config.js","argos-dom.js","argos-forms.js","argos-globals.js","argos-json-utils.js","argos-log-errors.js","argos-log.js","argos-msg.js","argos-rest-utils.js","argos-router.js","argos-utils.js","argos-views-utils.js","argos-views.js"],"names":["ApiRest","optionsOverride","options","_setOptions","restUtils","getOptionsDefault","prop","optionsDefault","hasOwnProperty","req","i","len","setRequestHeader","type","charset","headers","length","key","value","resource","verb","aditionalData","deferred","Q","defer","XMLHttpRequest","queryString","prepareQueryString","postData","JSON","stringify","serverResponse","open","_setHeaders","onreadystatechange","e","readyState","prepareResponse","isValid","errorInterceptor","showErrorServer","errorDescription","reject","showPreload","hidePreloader","resolve","content","showPreloader","send","promise","_doRequest","putData","deleteData","config","module","self","optionsState","serviceWorkers","init","urlConfig","restOptions","instanceRest","getResource","then","data","initAll","error","log","environment","generalData","lang","active","rest","setOptionsDefault","setSpecialCodes","specialCodes","forceEntry","defaultState","getOptionsState","getServiceWorkers","getEnvironment","getLang","argosDom","params","selector","document","querySelectorAll","Ar","methods","hide","classList","add","show","remove","toggle","addClass","classAdd","removeClass","classRemove","toggleClass","classToggle","setStyle","style","fade","text","textContent","html","indexOf","innerHTML","parentNode","removeChild","onRender","node","timer","interval","timeCount","setTimeout","clearTimeout","nodeToCheck","isEmpty","obj","object","openModal","idModal","modal","getElementById","setAttribute","closeModal","fn","prototype","window","forms","getValues","idForm","nodes","jsonForm","radioInputs","warning","toLowerCase","name","getAttribute","getValue","push","_node_","idNode","tagName","trim","checked","querySelector","_getMultiSelectValues","selectedValues","selected","enabled","_setEnabled","disabled","enab","required","_setRequired","notRequired","resetErrors","checkRequired","checkType","customValidation","addError","_checkIsNumber","_checkIsString","_checkIsEmail","rule","test","RegExp","errorType","errorString","globals","getTexts","formValidations","isRequired","wrongFormat","insertAdjacentHTML","addErrorMsg","msg","stringHTML","allStates","allTexts","allEndPoints","currentState","getAllStates","loadAllStates","uri","states","setCurrentState","_state_","_section_","state","section","getCurrentState","loadTexts","loadRest","prepareRest","prefix","baseUrl","suffix","endPoints","getRest","jsonUtils","copyObject","obToCopy","parse","findInObject","_array_","find","item","logErrors","addListeners","onerror","message","source","lineno","colno","success","console","table","_lastClass","showError","header","body","_showMsg","showWarning","showSuccess","showMsg","msgElement","msgHeader","msgBody","codes","validation","response","parseResponse","responseText","blockingErrors400","blockingErrors500","status","statusText","result","code","serverError","target","validCode","checkTokenExpired","tokenSanExpiration","resetToken","newOptions","query","output","call","slice","getSpecialCodes","errorMsg","router","stateSelected","checkIsSupported","history","addEventListener","setRoute","argumentsFn","split","stateGo","findRouteByUrl","entry","url","views","loadView","executeFunction","replaceState","resetStateSelected","currentHash","location","hash","findRouteByState","replace","getQueryString","search","substring","temp","itemTemp","cleanQueryString","href","shift","pushState","functionName","_context_","context","args","Array","namespaces","func","pop","apply","stateIsDefined","utils","viewPort","isAndroid","navigator","userAgent","match","isiOS","isFirefox","isMobile","getNavigator","viewsUtils","renderTemplate","_data_","_source_","_container_","template","Handlebars","compile","compiledTemplate","container","ctrlsLoaded","tplsLoaded","scriptsContainer","tplsContainer","allPromisses","currentCtrl","firstChild","controllers","loadControllers","templates","loadTemplates","all","results","checkAllReady","timeout","getNameController","controller","ctrlName","charAt","toUpperCase","nodeScript","createElement","controllerName","src","id","onload","addCtrlLoaded","appendChild","templatePath","templateScript","check","entryCtrl","toString"],"mappings":"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","file":"argos.min.js","sourcesContent":["/**\r\n * @namespace ApiRest\r\n * @return {undefined}\r\n * @param {object} [optionsOverride] Set default options\r\n * optionsOverride = {\r\n    'type': 'application/json',\r\n    'headers': [{'key': 'foo', 'value': 'bar'}],\r\n    'charset': 'ASCII',\r\n    'showPreload': true,\r\n    'errorInterceptor': true\r\n    }\r\n  };\r\n *\r\n * @description class for api rest.\r\n */\r\n\r\nclass ApiRest {\r\n\r\n  constructor(optionsOverride) {\r\n    this.options = optionsOverride ? this._setOptions(optionsOverride) : restUtils.getOptionsDefault();\r\n  }\r\n\r\n  _setOptions(optionsOverride) {\r\n    let prop;\r\n    let optionsDefault = restUtils.getOptionsDefault();\r\n\r\n    for (prop in optionsOverride) {\r\n      if ( optionsDefault.hasOwnProperty(prop) ) {\r\n        optionsDefault[prop] = optionsOverride[prop];\r\n      }\r\n    }\r\n    return optionsDefault;\r\n  }\r\n\r\n  _setHeaders(req) {\r\n    let i = 0;\r\n    let len;\r\n\r\n    if ( this.options.hasOwnProperty('type') ) {\r\n      req.setRequestHeader('Content-Type', this.options.type +'; charset='+this.options.charset);\r\n    }\r\n    if ( this.options.hasOwnProperty('headers') && this.options.headers.length ) {\r\n      len = this.options.headers.length;\r\n      for (; i<len; i++ ) {\r\n        req.setRequestHeader(this.options.headers[i].key, this.options.headers[i].value);\r\n      }\r\n    }\r\n    return req;\r\n  }\r\n\r\n  _doRequest(resource, verb, aditionalData) {\r\n    let deferred  = Q.defer();\r\n    let req           = new XMLHttpRequest();\r\n    let queryString   = verb === 'GET' && typeof aditionalData === 'object' ? restUtils.prepareQueryString(aditionalData) : '';\r\n    let postData      = verb !== 'GET' && aditionalData ? JSON.stringify(aditionalData) : '';\r\n    let serverResponse = {};\r\n\r\n    req.open(verb, resource + queryString, true);\r\n    req = this._setHeaders(req);\r\n\r\n    req.onreadystatechange = (e)=> {\r\n      if ( req.readyState !== 4 ) {\r\n        return;\r\n      }\r\n      serverResponse = restUtils.prepareResponse(e, req, this.options);\r\n\r\n      if ( !serverResponse.isValid && this.options.errorInterceptor ) {\r\n          restUtils.showErrorServer(serverResponse.errorDescription);\r\n          deferred.reject(serverResponse.errorDescription);\r\n\r\n      } else {\r\n        if ( this.options.showPreload ) {\r\n          restUtils.hidePreloader();\r\n        }\r\n       deferred.resolve(serverResponse.content);\r\n      }\r\n    }\r\n\r\n    if ( this.options.showPreload ) {\r\n      restUtils.showPreloader();\r\n    }\r\n\r\n    req.send(postData);\r\n    return deferred.promise;\r\n  }\r\n\r\n  getResource(resource, queryString) {\r\n    return this._doRequest(resource, 'GET', queryString);\r\n  }\r\n\r\n  postResource(resource, postData) {\r\n    return this._doRequest(resource, 'POST', postData);\r\n  }\r\n\r\n  putResource(resource, putData) {\r\n    return this._doRequest(resource, 'PUT', putData);\r\n  }\r\n\r\n  deleteResource(resource, deleteData) {\r\n    return this._doRequest(resource, 'DELETE', deleteData);\r\n  }\r\n\r\n}\r\n","\"use strict\";\r\n\r\n/*eslint-disable no-unused-vars*/\r\nconst config = (function() {\r\n/*eslint-enable no-unused-vars*/\r\n\r\n  let module  = {};\r\n  let self    = module;\r\n\r\n  module.config  = {\r\n\t\t'environment': 'develop',\r\n\t\t'lang': 'en_En'\r\n  };\r\n\r\n\tmodule.optionsState = {\r\n    'forceEntry': false,\r\n    'defaultState': 'main'\r\n\t};\r\n\r\n  module.serviceWorkers = {\r\n    'active': false\r\n  };\r\n\r\n  module.init = ()=> {\r\n    let deferred = Q.defer();\r\n    let urlConfig = './shell/theme/config.json';\r\n    let restOptions = {\r\n      'type': 'application/json',\r\n      'showPreload': false,\r\n      'errorInterceptor': true\r\n    };\r\n    let instanceRest = new ApiRest(restOptions);\r\n\r\n    instanceRest.getResource(urlConfig).then(\r\n      (data)=> {\r\n        self.initAll(data);\r\n        deferred.resolve();\r\n      },\r\n      (error) => {\r\n        log.error('error get config data: '+ error);\r\n        deferred.reject();\r\n      });\r\n      return deferred.promise;\r\n  };\r\n\r\n  module.initAll = (data)=> {\r\n    self.config.environment     = data.generalData.environment;\r\n    self.config.lang            = data.generalData.lang;\r\n    self.serviceWorkers.active  = data.serviceWorkers.active;\r\n\r\n    if ( data.rest.hasOwnProperty('restOptions') ) {\r\n      restUtils.setOptionsDefault(data.rest.restOptions);\r\n    }\r\n    if ( data.rest.hasOwnProperty('specialCodes') ) {\r\n      restUtils.setSpecialCodes(data.rest.specialCodes);\r\n    }\r\n    if (  data.hasOwnProperty('optionsState') && data.optionsState.hasOwnProperty('forceEntry') ) {\r\n      self.optionsState.forceEntry    = data.optionsState.forceEntry;\r\n      self.optionsState.defaultState  = data.optionsState.defaultState;\r\n    }\r\n  };\r\n\r\n  module.getOptionsState = () => {\r\n    return self.optionsState;\r\n  };\r\n\r\n  module.getServiceWorkers = () => {\r\n    return self.serviceWorkers;\r\n  };\r\n\r\n  module.getEnvironment = ()=> {\r\n    return self.config.environment;\r\n  };\r\n\r\n  module.getLang  = ()=> {\r\n    return self.config.lang;\r\n  };\r\n\r\n  return {\r\n    init:               module.init,\r\n    getOptionsState:    module.getOptionsState,\r\n    getEnvironment:     module.getEnvironment,\r\n    getLang:            module.getLang,\r\n    getServiceWorkers:  module.getServiceWorkers\r\n  };\r\n\r\n } )();\r\n","/**\r\n * @namespace Ar\r\n * @description Lite module for DOM manipulating\r\n * methods (work in progress)\r\n *\r\n  *  **text()** inserta una cadena de texto en los elementos seleccionados\r\n  *  ```javascript\r\n    Ar('.foo').text('bazinga');\r\n    ```\r\n\r\n  *  **html()** inserta una cadena de html en los elementos seleccionados. Su uso es obligatorio cuando se inserta html derivado del mundo exterior de la aplicación, ya que previene la inserción de scripts.\r\n  *  ```javascript\r\n    Ar('.foo').html('bazinga');\r\n    ```\r\n\r\n  *  **hide()** oculta uno o más elementos\r\n  * ```javascript\r\n    Ar('.foo').hide();\r\n    ```\r\n\r\n  * **show()** muestra uno o más elementos\r\n  *  ```javascript\r\n    Ar('.foo').hide();\r\n    ```\r\n\r\n  *  **toggle()** togglea la visibilidad de uno o más elementos\r\n  * ```javascript\r\n    Ar('.foo').hide();\r\n    ```\r\n\r\n  *  **addClass()** añade una clase\r\n  * ```javascript\r\n    Ar('.foo').addClass('clase');\r\n    ```\r\n\r\n  *  **removeClass()** elimina una clase\r\n  * ```javascript\r\n    Ar('.foo').removeClass('clase');\r\n    ```\r\n\r\n  *  **toggleClass()** togglea una clase\r\n  * ```javascript\r\n    Ar('.foo').toggleClass('clase');\r\n    ```\r\n\r\n  *  **setStyle()** cambia un estilo (en línea)\r\n  * ```javascript\r\n    Ar('.foo').setStyle('color', 'red');\r\n    ```\r\n\r\n  *  **remove()** elimina un nodo (y sus listeners asociados)\r\n  * ```javascript\r\n    Ar('.foo').remove();\r\n    ```\r\n\r\n  *  **onRender()** chequea que un nodo esté renderizado\r\n  * ```javascript\r\n    Ar().onRender('#foo');\r\n    ```\r\n*/\r\n\r\n(function () {\r\n\r\n  const argosDom = function (params) {\r\n    let selector = document.querySelectorAll(params);\r\n    let i = 0;\r\n    this.length = selector.length;\r\n\r\n    for (; i < this.length; i++) {\r\n      this[i] = selector[i];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  const Ar = function(params) {\r\n    return new argosDom(params);\r\n  };\r\n\r\n  const methods = {};\r\n\r\n  methods.self = this;\r\n\r\n  methods.hide = function() {\r\n    let len = this.length;\r\n\r\n    while (len--) {\r\n      this[len].classList.add('argos-hide');\r\n    }\r\n    return this;\r\n  };\r\n\r\n  methods.show = function() {\r\n    let len = this.length;\r\n\r\n    while (len--) {\r\n      this[len].classList.remove('argos-hide');\r\n    }\r\n    return this;\r\n  };\r\n\r\n  methods.toggle = function() {\r\n    let len = this.length;\r\n\r\n    while (len--) {\r\n      this[len].classList.toggle('argos-hide');\r\n    }\r\n    return this;\r\n  };\r\n\r\n  methods.addClass = function(classAdd) {\r\n    let len = this.length;\r\n\r\n    if ( classAdd ) {\r\n      while (len--) {\r\n        this[len].classList.add(classAdd);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  methods.removeClass = function(classRemove) {\r\n    let len = this.length;\r\n\r\n    if ( classRemove ) {\r\n      while (len--) {\r\n        this[len].classList.remove(classRemove);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  methods.toggleClass = function(classToggle) {\r\n    let len = this.length;\r\n\r\n    if (classToggle ) {\r\n      while (len--) {\r\n        this[len].classList.toggle(classToggle);\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  methods.setStyle = function(style, value) {\r\n    let len = this.length;\r\n\r\n    if ( style && value ) {\r\n      while (len--) {\r\n        this[len].style[style] = value;\r\n      }\r\n    }\r\n    return this;\r\n  };\r\n\r\n  methods.fade = function() {\r\n    let len = this.length;\r\n\r\n    while (len--) {\r\n      this[len].classList.add('fade');\r\n      this[len].classList.add('fade-in');\r\n      this[len].classList.add('fade-out');\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  methods.text = function(text) {\r\n    let len = this.length;\r\n\r\n    while (len--) {\r\n      this[len].textContent = text;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  methods.html = function(content) {\r\n    let len = this.length;\r\n\r\n    if ( content.indexOf('script') !== -1 ) {\r\n      content = 'scripts are not allowed';\r\n    }\r\n\r\n    while (len--) {\r\n      this[len].innerHTML = content;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  methods.remove = function() {\r\n    let len = this.length;\r\n\r\n    while (len--) {\r\n      if ( this[len].parentNode ) {\r\n        this[len].parentNode.removeChild(this[len]);\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  methods.onRender = function(node) {\r\n    let deferred = Q.defer();\r\n    const timer = {\r\n\r\n      interval: function() {\r\n        let self = this;\r\n        let timeCount = setTimeout(function() {\r\n          clearTimeout(timeCount);\r\n          self.init(node);\r\n        }, 100);\r\n      },\r\n\r\n      init: function(node) {\r\n        let nodeToCheck = document.querySelectorAll(node);\r\n\r\n        if ( !nodeToCheck || nodeToCheck.length === 0 ) {\r\n          this.interval(node);\r\n          return;\r\n        }\r\n        deferred.resolve();\r\n      }\r\n\r\n    };\r\n\r\n    timer.init(node);\r\n    return deferred.promise;\r\n  };\r\n\r\n  methods.isEmpty = function(obj) {\r\n    let object = obj;\r\n\r\n    for(let prop in object) {\r\n      if(object.hasOwnProperty(prop)){\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  methods.openModal = function(idModal) {\r\n    let modal = document.getElementById(idModal);\r\n\r\n    modal.setAttribute('show','show');\r\n  };\r\n\r\n  methods.closeModal = function() {\r\n    this[0].setAttribute('show','hidden');\r\n  };\r\n\r\n  Ar.fn = argosDom.prototype = methods;\r\n\r\n  if ( !window.Ar ) {\r\n    window.Ar = Ar;\r\n  }\r\n\r\n})();\r\n","'use strict';\r\n\r\n/**\r\n * @namespace forms\r\n * @description module for work with forms.\r\n * todo: show error server\r\n */\r\nconst forms = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  /* ====================================================\r\n      get values\r\n  ==================================================== */\r\n\r\n  /**\r\n  * @memberof forms#\r\n  * @method\r\n  * @name getValues\r\n  * @param {string} idForm - The id of the form.\r\n  * @return {object} All form childrens values.\r\n  * @description return pair key-value for each input.\r\n  * The inputs need have the class 'js-itemForm' and, recommended, an atribute called 'data-key'.\r\n  * @example:\r\n  *  ```html\r\n    <input type=\"text\" name=\"inputText\" class=\"js-itemForm\" data-key=\"inputText\">\r\n    ```\r\n  */\r\n  module.getValues = (idForm)=> {\r\n    let nodes       = document.querySelectorAll('#'+idForm + ' .js-itemForm');\r\n    let jsonForm    = {};\r\n    let i           = 0;\r\n    let len         = nodes.length;\r\n    let key         = '';\r\n    let value       = '';\r\n    /* guardamos aquí los radioButtons para no setearlos más de una vez */\r\n    let radioInputs = [];\r\n\r\n    if ( !len ) {\r\n      log.warning('the form dont have inputs or mybe forget add js-itemForm class?');\r\n    }\r\n\r\n    for (; i<len; i++) {\r\n      if ( nodes[i].type.toLowerCase() !== 'radio' || radioInputs.indexOf(nodes[i].name) === -1 ) {\r\n        key   = nodes[i].getAttribute('data-key') || nodes[i].name || i;\r\n        value = self.getValue(nodes[i]);\r\n        jsonForm[key] = value;\r\n        if ( nodes[i].type.toLowerCase() === 'radio' ) {\r\n          radioInputs.push(nodes[i].name);\r\n        }\r\n      }\r\n    }\r\n\r\n    return jsonForm;\r\n  };\r\n\r\n  /**\r\n  * @memberof forms#\r\n  * @method\r\n  * @name getValue\r\n  * @param {string | object} _node_ - The id element or the element of form.\r\n  * @return {string |array} The form element value.\r\n  */\r\n  module.getValue = (_node_)=> {\r\n    let node     = typeof _node_ === 'string' ? document.getElementById(idNode) : _node_;\r\n    let value    = '';\r\n    let type     = '';\r\n\r\n    if ( !node ) {\r\n      log.warning('getValue() :: there is no element');\r\n    }\r\n\r\n    type = node.tagName.toLowerCase() !== 'input' ? node.tagName.toLowerCase() : node.type.toLowerCase();\r\n    type = type === 'select' && node.type === 'select-multiple' ? 'select-multiple' : type;\r\n\r\n    switch (type) {\r\n      case 'text':\r\n      case 'textarea':\r\n      case 'number':\r\n        value = node.value.trim();\r\n        break;\r\n      case 'checkbox':\r\n        value = node.checked ? node.value : false;\r\n        break;\r\n      case 'radio':\r\n        value = document.querySelector('input[name = \"' + node.name + '\"]:checked').value;\r\n        break;\r\n      case 'select-multiple':\r\n        value = self._getMultiSelectValues(node);\r\n        break;\r\n      default:\r\n        value = node.value;\r\n    }\r\n\r\n    return value;\r\n  };\r\n\r\n  /**\r\n  * @memberof forms#\r\n  * @method\r\n  * @name _getMultiSelectValues\r\n  * @param {object} _node_ - The element multi-select of form.\r\n  * @return {array} The multi-select value.\r\n  */\r\n  module._getMultiSelectValues = (node)=> {\r\n    let selectedValues = [];\r\n    let i = 0;\r\n    let len = node.length;\r\n\r\n    for (; i < len; i++) {\r\n      if (node.options[i].selected) {\r\n        selectedValues.push(node.options[i].value);\r\n      }\r\n    }\r\n    return selectedValues;\r\n  };\r\n\r\n  /* ====================================================\r\n      utils\r\n  ==================================================== */\r\n\r\n  module.enabled = (idNode)=> {\r\n    self._setEnabled(idNode, false);\r\n  };\r\n\r\n  module.disabled = (idNode)=> {\r\n    self._setEnabled(idNode, true);\r\n  };\r\n\r\n  module._setEnabled = (idNode, enab)=> {\r\n    document.getElementById(idNode).setAttribute('disabled', enab);\r\n  };\r\n\r\n  module.required = (idNode)=> {\r\n    self._setRequired(idNode, 'required');\r\n  };\r\n\r\n  module.notRequired = (idNode)=> {\r\n    self._setRequired(idNode, false);\r\n  };\r\n\r\n  module._setRequired = (idNode, req)=> {\r\n    document.getElementById(idNode).setAttribute('data-required', req);\r\n  };\r\n\r\n  /* ====================================================\r\n      validity checks\r\n  ==================================================== */\r\n\r\n  module.isValid = (idForm)=> {\r\n    let nodes       = document.querySelectorAll('#'+idForm + ' .js-itemForm');\r\n    let i           = 0;\r\n    let len         = nodes.length;\r\n    let isValid     = true;\r\n\r\n    if ( !len ) {\r\n      log.warning('the form dont have inputs or mybe forget add js-itemForm class?');\r\n    }\r\n\r\n    self.resetErrors(idForm);\r\n\r\n    for (; i<len; i++) {\r\n      if ( !self.checkRequired(nodes[i]) || !self.checkType(nodes[i]) || !self.customValidation(nodes[i]) ) {\r\n        isValid = false;\r\n      }\r\n    }\r\n    return isValid;\r\n  };\r\n\r\n  /* No le paso los nodos para que se pueda usar como método de forma independiente */\r\n  module.resetErrors = (idForm)=> {\r\n    let nodes = document.querySelectorAll('#'+idForm + ' .js-itemForm');\r\n    let i     = 0;\r\n    let len   = nodes.length;\r\n\r\n    for (; i<len; i++) {\r\n      nodes[i].classList.remove('hasError');\r\n    }\r\n\r\n    nodes = document.querySelectorAll('#'+idForm + ' .js-argosErrorMsg');\r\n    i     = 0;\r\n    len   = nodes.length;\r\n\r\n    for (; i<len; i++) {\r\n     nodes[i].parentNode.removeChild(nodes[i]);\r\n    }\r\n  };\r\n\r\n  module.checkRequired = (node)=> {\r\n    let isValid = true;\r\n\r\n    if ( node.getAttribute('data-required') === 'required' && !self.getValue(node) ) {\r\n      isValid = false;\r\n      self.addError(node, 'required');\r\n    }\r\n    return isValid;\r\n  };\r\n\r\n  module.checkType = (node)=> {\r\n    let type =  node.getAttribute('data-type');\r\n\r\n    switch(type) {\r\n      case 'isNumber':\r\n        return self._checkIsNumber(node);\r\n      case 'isString':\r\n        return self._checkIsString(node);\r\n      case 'isEmail':\r\n      return self._checkIsEmail(node);\r\n      default:\r\n        return true;\r\n    }\r\n  };\r\n\r\n  module._checkIsString = (node)=> {\r\n    let isValid = true;\r\n    let rule    = /[1-9]/i;\r\n    let value   = self.getValue(node);\r\n\r\n    if ( !rule.test(value) ) {\r\n      isValid = false;\r\n      self.addError(node, 'notString');\r\n    }\r\n    return isValid;\r\n  };\r\n\r\n  module._checkIsNumber = (node)=> {\r\n    let isValid = true;\r\n    let rule    = /^[0-9]*$/g;\r\n    let value   = self.getValue(node);\r\n\r\n    if ( !rule.test(value) ) {\r\n      isValid = false;\r\n      self.addError(node, 'notNumber');\r\n    }\r\n\r\n    if ( node.getAttribute('data-zero') && node.getAttribute('data-zero') === 'notAllowed' && value === 0 ) {\r\n      self.addError(node, 'notZero');\r\n      isValid = false;\r\n    }\r\n\r\n    if ( node.getAttribute('data-negative') && node.getAttribute('data-negative') === 'notAllowed' && value < 0 ) {\r\n      self.addError(node, 'notNegative');\r\n      isValid = false;\r\n    }\r\n\r\n    return isValid;\r\n  };\r\n\r\n  module._checkIsEmail = (node)=> {\r\n    let isValid = true;\r\n    let rule    = /[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}/;\r\n    let value   = self.getValue(node);\r\n\r\n    if ( !rule.test(value) ) {\r\n        isValid = false;\r\n        self.addError(node, 'notEmail');\r\n    }\r\n\r\n    return isValid;\r\n  };\r\n\r\n  module.customValidation = (node)=> {\r\n    let isValid = true;\r\n    let rule    = node.getAttribute('data-regex') ? new RegExp(node.getAttribute('data-regex'), 'i') : false;\r\n    let value   = self.getValue(node);\r\n\r\n    if ( !rule ) {\r\n      return isValid;\r\n    }\r\n\r\n    if ( !rule.test(value) ) {\r\n      isValid = false;\r\n      self.addError(node, node.getAttribute('data-regexErrMsg') || 'wrongFormat');\r\n    }\r\n\r\n    return isValid;\r\n  };\r\n\r\n  /* todo: ampliar tipología de errores */\r\n  module.addError = (node, errorType)=> {\r\n    let errorString = '';\r\n\r\n    switch (errorType) {\r\n      case 'required':\r\n        errorString = globals.getTexts().formValidations.isRequired;\r\n        break;\r\n      default:\r\n        errorString = globals.getTexts().formValidations.wrongFormat;\r\n    }\r\n    node.insertAdjacentHTML('afterend', self.addErrorMsg(errorString));\r\n    node.classList.add('hasError');\r\n  };\r\n\r\n  module.addErrorMsg = (msg)=> {\r\n    let stringHTML = `<div class=\"form__error js-argosErrorMsg\"><div class=\"form__error__arrow\"></div>${msg}</div></div>`;\r\n\r\n    return stringHTML;\r\n  };\r\n\r\n  return {\r\n    getValues:          module.getValues,\r\n    getValue:           module.getValue,\r\n    disabled:           module.disabled,\r\n    enabled:            module.enabled,\r\n    required:           module.required,\r\n    notRequired:        module.notRequired,\r\n    isValid:            module.isValid,\r\n    checkRequired:      module.checkRequired,\r\n    checkType:          module.checkType,\r\n    customValidation:   module.customValidation,\r\n    addError:           module.addError,\r\n    addErrorMsg:        module.addErrorMsg\r\n  };\r\n\r\n})();\r\n","'use strict';\r\n\r\n/**\r\n * @namespace globals\r\n * @description get and set application global data\r\n */\r\nconst globals = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  module.allStates    = [];\r\n  module.allTexts     = {};\r\n  module.allEndPoints = {};\r\n\r\n  module.currentState = {\r\n\t\t'state': 'main',\r\n  \t'section': ''\r\n\t};\r\n\r\n  module.getAllStates = ()=> {\r\n    return self.allStates;\r\n  };\r\n\r\n  module.loadAllStates = ()=> {\r\n    let instanceRest = new ApiRest();\r\n    let deferred     = Q.defer();\r\n    let uri          = './shell/theme/states.json';\r\n\r\n    instanceRest.getResource(uri).then(\r\n      (data)=> {\r\n        self.allStates = data.states;\r\n        deferred.resolve(data);\r\n      },\r\n      (error) => {\r\n        log.error('error get states: '+ error);\r\n        deferred.reject();\r\n      });\r\n    return deferred.promise;\r\n  };\r\n\r\n  module.setCurrentState = (_state_, _section_)=> {\r\n    if ( !_state_) {\r\n      log.warning('dont set state if stage is not defined');\r\n      return;\r\n    }\r\n    self.currentState.state    = _state_;\r\n    self.currentState.section  =  _section_ ? _section_ : '';\r\n  };\r\n\r\n  module.getCurrentState = ()=> {\r\n    return self.currentState;\r\n  };\r\n\r\n  module.getTexts = ()=> {\r\n    return self.allTexts;\r\n  };\r\n\r\n  module.loadTexts = ()=> {\r\n    let instanceRest = new ApiRest();\r\n    let deferred     = Q.defer();\r\n    let lang         = config.getLang();\r\n    let uri          = './shell/theme/langs/' + lang + '.json';\r\n\r\n    instanceRest.getResource(uri).then(\r\n      (data)=> {\r\n        self.allTexts = data;\r\n        deferred.resolve(data);\r\n      },\r\n      (error) => {\r\n        log.error('error loadTexts: '+ error);\r\n        deferred.reject();\r\n      });\r\n    return deferred.promise;\r\n  };\r\n\r\n  module.loadRest = ()=> {\r\n    let instanceRest = new ApiRest();\r\n    let deferred     = Q.defer();\r\n    let lang         = config.getLang();\r\n    let uri          = './shell/theme/rest.json';\r\n\r\n    instanceRest.getResource(uri).then(\r\n      (data)=> {\r\n        self.prepareRest(data);\r\n        deferred.resolve();\r\n      },\r\n      (error) => {\r\n        log.error('error load config rest: '+ error);\r\n        deferred.reject();\r\n      });\r\n    return deferred.promise;\r\n  };\r\n\r\n  module.prepareRest = (data)=> {\r\n    let environment = config.getEnvironment();\r\n    let prefix      = data.generalData.baseUrl[environment];\r\n    let suffix      = data.generalData.type[environment];\r\n\r\n    for (let prop in data.endPoints) {\r\n      self.allEndPoints[prop] = prefix + data.endPoints[prop] + suffix;\r\n    }\r\n\r\n  };\r\n\r\n  module.getRest = ()=> {\r\n    return self.allEndPoints;\r\n  };\r\n\r\n  return {\r\n    getAllStates:     module.getAllStates,\r\n    loadAllStates:    module.loadAllStates,\r\n    getCurrentState:  module.getCurrentState,\r\n    setCurrentState:  module.setCurrentState,\r\n    getTexts:         module.getTexts,\r\n    loadTexts:        module.loadTexts,\r\n    loadRest:         module.loadRest,\r\n    getRest:          module.getRest\r\n  };\r\n\r\n})();\r\n","'use strict';\r\n\r\n/**\r\n * @namespace jsonUtils\r\n * @description utils to work with collections (arrays and objects)\r\n */\r\n\r\nconst jsonUtils = (function () {\r\n\r\n  const module  = {};\r\n  const self    = module;\r\n\r\n  module.copyObject = (obToCopy)=> {\r\n    return JSON.parse(JSON.stringify(obToCopy));\r\n  };\r\n\r\n  module.findInObject = (_array_, key, value) => _array_.find(item => item[key] === value);\r\n\r\n  return {\r\n    copyObject:   module.copyObject,\r\n    findInObject: module.findInObject\r\n  };\r\n\r\n})();","'use strict';\r\n\r\n/**\r\n * @namespace logErrors\r\n * @description get and set application global data\r\n * todo: send errors to server\r\n */\r\nconst logErrors = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  module.init = ()=> {\r\n    self.addListeners();\r\n  };\r\n\r\n  module.addListeners = ()=> {\r\n    window.onerror = function(message, source, lineno, colno, error) {\r\n      let msg =\r\n        `error: ${message}\r\n        file: ${source}\r\n        line: ${lineno}\r\n        col: ${colno}\r\n        error: ${error}`;\r\n        log.error(msg)\r\n    }\r\n  };\r\n\r\n  return {\r\n    init: module.init\r\n  };\r\n\r\n})();\r\n","'use strict';\r\n\r\n/**\r\n * @namespace log\r\n * @description secure console.log\r\n */\r\nconst log = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  const environment = config.getEnvironment();\r\n\r\n  module.success = (msg)=> {\r\n    if ( msg && environment !== 'production' ) {\r\n      console.log('%c'+ msg, 'color: #45a163');\r\n    }\r\n  };\r\n\r\n  module.log = (msg)=> {\r\n    if ( msg && environment !== 'production' ) {\r\n      console.log('%c'+ msg, 'color: #005999');\r\n    }\r\n  };\r\n\r\n  module.warning = (msg)=> {\r\n    if ( msg && environment !== 'production' ) {\r\n      console.log('%c'+ msg, 'color: #f48024');\r\n    }\r\n  };\r\n\r\n  module.error = (msg)=> {\r\n    if ( msg && environment !== 'production' ) {\r\n      console.log('%c'+ msg, 'color: #f42424');\r\n    }\r\n  };\r\n\r\n  module.table = (msg)=> {\r\n    if ( msg && environment !== 'production' ) {\r\n      console.table(msg);\r\n    }\r\n  };\r\n\r\n  return {\r\n    success:  module.success,\r\n    log:      module.log,\r\n    warning:  module.warning,\r\n    error:    module.error,\r\n    table:    module.table\r\n  };\r\n\r\n})();\r\n","'use strict';\r\n\r\n/**\r\n * @namespace msg\r\n * @description Gestiona los mensajes que se le muestran al usuario\r\n */\r\nconst msg = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  module._lastClass = '';\r\n\r\n  module.showError = (header, body)=> {\r\n    self._showMsg('alert', header, body);\r\n  };\r\n\r\n  module.showWarning = (header, body)=> {\r\n    self._showMsg('warning', header, body);\r\n  };\r\n\r\n  module.showSuccess = (header, body)=> {\r\n    self._showMsg('success', header, body);\r\n  };\r\n\r\n  module.showErrorServer = (error)=> {\r\n    self._showMsg.showMsg('alert', 'server error', error);\r\n    // todo : bloquear la aplicación\r\n  };\r\n\r\n  module.showMsg = (type, header, body)=> {\r\n    let msgElement  = document.getElementById('argos-msg');\r\n    let msgHeader   = header || '';\r\n    let msgBody     = body || '';\r\n\r\n    if ( self._lastClass ) {\r\n      msgElement.classList.remove(self._lastClass);\r\n    }\r\n    self._lastClass = type;\r\n    msgElement.classList.add(type);\r\n\r\n    document.getElementById('argos-msg-header').textContent = msgHeader;\r\n    document.getElementById('argos-msg-body').textContent = msgBody;\r\n\r\n    msgElement.classList.add('argos-fade-out');\r\n    msgElement.classList.remove('argos-hide');\r\n    msgElement.classList.add('argos-fade-in');\r\n  };\r\n\r\n  return {\r\n    showError:          module.showError,\r\n    showWarning:        module.showWarning,\r\n    showSuccess:        module.showSuccess,\r\n    showErrorServer:    module.showErrorServer\r\n  };\r\n\r\n})();\r\n\r\n","const restUtils = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  module.optionsDefault = {\r\n    'type': 'application/json',\r\n    'headers': [],\r\n    'charset': 'utf-8',\r\n    'showPreload': true,\r\n    'errorInterceptor': true\r\n  };\r\n\r\n  module.codes = {\r\n    'success': 'san-200',\r\n    'notFound': 'san-404',\r\n    'notAuth': 'san-403',\r\n    'serverError': 'san-500',\r\n    'tokenExpiration': '401',\r\n    'tokenSanExpiration': 'san-441',\r\n    'tokenCorporateExpiration': 'san-442'\r\n  };\r\n\r\n  module.prepareResponse = (e, req, options)=> {\r\n    let validation        = {};\r\n    let response          = options.type === 'application/json' ? self.parseResponse(e) : req.responseText;\r\n    let blockingErrors400 = ['403', '405', '406', '413', '414', '415', '416', '417', '429'];\r\n    let blockingErrors500  = /^5/;\r\n\r\n    validation.isValid          = true,\r\n    validation.content          = response;\r\n    validation.errorDescription = '';\r\n\r\n    if ( blockingErrors500.test(req.status) || blockingErrors400.indexOf(req.status) !== -1 ) {\r\n      validation.isValid          = false;\r\n      validation.errorDescription = req.status.statusText ? req.status.statusText : 'error server';\r\n      return validation;\r\n    }\r\n\r\n    if ( !options ) {\r\n      return validation;\r\n    }\r\n\r\n    if ( options.type === 'application/json' && !response ) {\r\n      validation.isValid          = false;\r\n      validation.errorDescription = 'error server: bad format json';\r\n      return validation;\r\n    }\r\n\r\n    if ( response.hasOwnProperty('result') && response.result.code === self.codes.serverError ) {\r\n      validation.isValid          = false;\r\n      validation.errorDescription = response.result.message ? response.result.message : 'error server';\r\n      return validation;\r\n    }\r\n\r\n    return validation;\r\n  };\r\n\r\n  module.parseResponse = (e)=> {\r\n    let data = {};\r\n\r\n    try {\r\n       data = JSON.parse(e.target.responseText);\r\n    } catch(error) {\r\n      data = null;\r\n      log.error('error parsing data', e);\r\n    }\r\n    return data;\r\n  };\r\n\r\n  module.validCode = (result)=> {\r\n    if ( result.code === this.codes.success ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  module.checkTokenExpired = (result)=> {\r\n    if ( result.code === this.codes.tokenSanExpiration ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // todo, revisar\r\n  module.resetToken = ()=> {\r\n//     let deferred = Q.defer();\r\n//\r\n//     function reset(corporateToken) {\r\n//       restToken.getAuthToken(corporateToken).then(function(data) {\r\n//         restOptions.headers[0].value = data.authToken;\r\n//         deferred.resolve();\r\n//       });\r\n//     }\r\n//\r\n//     if ( !config.tokenUrl ) {\r\n//       restToken.getCorporateToken().then(function(corporateToken) {\r\n//         reset(corporateToken);\r\n//       });\r\n//     } else {\r\n//       reset(corporateToken);\r\n//     }\r\n//     return deferred.promise;\r\n  };\r\n\r\n  module.getOptionsDefault = ()=> {\r\n    return JSON.parse(JSON.stringify(self.optionsDefault));\r\n  };\r\n\r\n  module.setOptionsDefault = (newOptions)=> {\r\n    let key;\r\n\r\n    if ( typeof newOptions !== 'object' ) {\r\n      log.error('new options must be an object');\r\n      return false;\r\n    }\r\n    for ( key in newOptions ) {\r\n      self.optionsDefault.key = newOptions[key]\r\n    }\r\n    return true;\r\n  };\r\n\r\n  module.prepareQueryString = (queryString)=> {\r\n    let query   = queryString || {};\r\n    let output  = '?';\r\n    let prop;\r\n\r\n    for (prop in query) {\r\n      if ({}.hasOwnProperty.call(query, prop)) {\r\n        output += prop + '=' + query[prop] + '&';\r\n      }\r\n    }\r\n    output = output.length ? output.slice(0, -1) : output;\r\n\r\n    return output;\r\n  };\r\n\r\n  module.getSpecialCodes = ()=> {\r\n    return self.codes;\r\n  };\r\n\r\n  module.setSpecialCodes = (specialCodes)=> {\r\n    self.codes = specialCodes;\r\n  };\r\n\r\n  /* todo: preparar una alternativa no polymer */\r\n  module.showPreloader = function() {\r\n    let node = document.getElementById('js-mainPreload');\r\n\r\n    if ( node ) {\r\n      node.setAttribute('show', 'show');\r\n    }\r\n  };\r\n\r\n  /* todo: preparar una alternativa no polymer */\r\n  module.hidePreloader = function() {\r\n    let node = document.getElementById('js-mainPreload');\r\n\r\n    if ( node ) {\r\n      node.setAttribute('show', 'hidden');\r\n    }\r\n  };\r\n\r\n  module.showErrorServer = function(errorMsg) {\r\n    msg.showErrorServer(errorMsg);\r\n  };\r\n\r\n  return {\r\n    getOptionsDefault:  module.getOptionsDefault,\r\n    setOptionsDefault:  module.setOptionsDefault,\r\n    getSpecialCodes:    module.getSpecialCodes,\r\n    setSpecialCodes:    module.setSpecialCodes,\r\n    prepareQueryString: module.prepareQueryString,\r\n    prepareResponse:    module.prepareResponse,\r\n    showPreloader:      module.showPreloader,\r\n    hidePreloader:      module.hidePreloader,\r\n    showErrorServer:    module.showErrorServer\r\n  };\r\n\r\n})();\r\n","'use strict';\r\n\r\n/**\r\n * @namespace router\r\n * @description proxy routes\r\n */\r\nconst router = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  module.stateSelected = {};\r\n\r\n  /**\r\n  * @memberof router#\r\n  * @method\r\n  * @name init\r\n  * @return {undefined}\r\n  * @description init states listeners\r\n  */\r\n  module.init = ()=> {\r\n    if ( !self.checkIsSupported() ) {\r\n      msg.showError('browser deprecated', 'No support api navigation');\r\n      return;\r\n    }\r\n    self.addListeners();\r\n  };\r\n\r\n  /**\r\n  * @memberof router#\r\n  * @method\r\n  * @name checkIsSupported\r\n  * @return {boolean}\r\n  * @description check if browser can manage history and pushState,\r\n  * necessary for the system router.\r\n  */\r\n  module.checkIsSupported = ()=> {\r\n    if ('history' in window && 'pushState' in history) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  /**\r\n  * @memberof router#\r\n  * @method\r\n  * @name addListeners\r\n  * @return {undefined}\r\n  * @description add listener to hash (#) change\r\n  */\r\n  module.addListeners = ()=> {\r\n    window.addEventListener('hashchange', ()=> {\r\n      self.setRoute();\r\n    });\r\n  };\r\n\r\n  /**\r\n  * @memberof router#\r\n  * @method\r\n  * @name setRoute\r\n  * @return {undefined}\r\n  * @description set the url, call lazy load controllers, and call the method defined in routes.json\r\n  */\r\n\r\n//// OJO, FALTA CUANDO VIENE X ENLACE\r\n\r\n  module.setRoute = ()=> {\r\n    let argumentsFn = self.stateSelected.params ? self.stateSelected.params.split(',') : null;\r\n    let stateSelected;\r\n\r\n    /* Si no venimos de stateGo, hay que recuperar los datos */\r\n    if ( !self.stateSelected.stateGo ) {\r\n      stateSelected = self.findRouteByUrl();\r\n      /* Si no hay ningún estado, dejamos pasar para que se puedan usar los hastagh en la página */\r\n      if ( !stateSelected ) {\r\n        return;\r\n      } else {\r\n        self.stateSelected.state    = stateSelected.state;\r\n        self.stateSelected.section  = stateSelected.section;\r\n        self.stateSelected.entry    = stateSelected.entry;\r\n        self.stateSelected.url      = stateSelected.url;\r\n      }\r\n    }\r\n\r\n    globals.setCurrentState(self.stateSelected.state, self.stateSelected.section);\r\n\r\n    views.loadView(self.stateSelected.state).then( ()=> {\r\n      /* Si al final uso un namespace, pasar este en lugar de window */\r\n      self.executeFunction(self.stateSelected.entry, window, argumentsFn);\r\n      history.replaceState(self.stateSelected, self.stateSelected.state, '#'+self.stateSelected.url);\r\n      self.resetStateSelected();\r\n    });\r\n  };\r\n\r\n  module.stateGo = (state, params)=> {\r\n    let currentHash = window.location.hash;\r\n\r\n    self.stateSelected = JSON.parse( JSON.stringify(self.findRouteByState(state)) );\r\n\r\n    /* Cacheamos aquí los parámetros para pasarlos más adelante */\r\n    self.stateSelected.params = params;\r\n\r\n    /* Marcamos que venimos de state go para no duplicar el trabajo más adelante\r\n    y saber que ya tenemos el state seleccionado */\r\n     self.stateSelected.stateGo = true;\r\n\r\n    /* Para poder llamar a la misma página debemos chequear si estamos llamando\r\n    al mismo estado */\r\n    if ( currentHash && currentHash.replace('#', '') === self.stateSelected.url ) {\r\n      self.setRoute();\r\n    } else {\r\n      window.location.hash = self.stateSelected.url;\r\n    }\r\n  };\r\n\r\n  module.resetStateSelected = ()=>{\r\n    self.stateSelected = {\r\n      'state': '',\r\n      'url': '',\r\n      'entry': '',\r\n      'controllers': [],\r\n      'templates': [],\r\n      'params': '',\r\n      'stateGo': false\r\n    }\r\n  };\r\n\r\n  module.getQueryString = ()=> {\r\n    let query      = window.location.search.substring(1);\r\n    let  params    = {};\r\n    let  temp      = [];\r\n    let itemTemp   = [];\r\n    let  i         = 0;\r\n    let  len;\r\n\r\n    if ( query === '' ) {\r\n      return false;\r\n    }\r\n    if ( query.indexOf('&') !== -1 ) {\r\n      temp = query.split('&');\r\n\r\n    } else {\r\n      temp.push(query);\r\n    }\r\n    len = temp.length;\r\n    for (; i<len; i++ ) {\r\n      itemTemp = temp[i].split('=');\r\n      params[itemTemp[0]] = itemTemp[1];\r\n    }\r\n    return params;\r\n  };\r\n\r\n  module.cleanQueryString = ()=> {\r\n    let url = window.location.href;\r\n\r\n    url = url.split('?').shift();\r\n    window.history.pushState({},'', url);\r\n  };\r\n\r\n  module.executeFunction = (functionName, _context_)=> {\r\n    let context     = _context_ || window;\r\n    let args        = Array.prototype.slice.call(arguments, 2);\r\n    let namespaces  = functionName.split('.');\r\n    let func        = namespaces.pop();\r\n    let i           = 0;\r\n    let len         = namespaces.length;\r\n\r\n\r\n    for (; i < len; i++) {\r\n      context = context[namespaces[i]];\r\n    }\r\n    return context[func].apply(context, args);\r\n  };\r\n\r\n  module.findRouteByUrl = ()=> {\r\n    let states        = globals.getAllStates();\r\n    let len           = states.length;\r\n    let i             = 0;\r\n    let stateSelected = false;\r\n    let hash          = location.hash.replace('#', '');\r\n\r\n    for (; i<len; i++) {\r\n      if ( states[i].url === hash ) {\r\n        stateSelected = states[i];\r\n        break;\r\n      }\r\n    }\r\n\r\n    return stateSelected;\r\n  };\r\n\r\n  module.findRouteByState = (state)=> {\r\n    let states        = globals.getAllStates();\r\n    let len           = states.length;\r\n    let i             = 0;\r\n    let stateSelected = false;\r\n\r\n    for (; i<len; i++) {\r\n      if ( states[i].state === state ) {\r\n        stateSelected = states[i];\r\n        break;\r\n      }\r\n    }\r\n\r\n    return stateSelected;\r\n  };\r\n\r\n  module.stateIsDefined = (state)=> {\r\n    if ( self.findRouteByState() ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n\r\n  return {\r\n    init:               module.init,\r\n    stateGo:            module.stateGo,\r\n    getQueryString:     module.getQueryString,\r\n    cleanQueryString:   module.cleanQueryString,\r\n    findRouteByState:   module.findRouteByState,\r\n    stateIsDefined:     module.stateIsDefined\r\n  };\r\n\r\n} )();\r\n","'use strict';\r\n\r\n/**\r\n * @namespace utilsJson\r\n * @description utils to work with collections (arrays and objects)\r\n */\r\n\r\nconst utils = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  module.viewPort = ()=> {\r\n    let isAndroid = navigator.userAgent.match(/Android/i) !== null;\r\n    let isiOS     = navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)/i) !== null;\r\n    let isFirefox = navigator.userAgent.match(/Firefox/i) !== null;\r\n    let isMobile  = isiOS || isAndroid;\r\n\r\n    let getNavigator = {\r\n      'isAndroid': isAndroid,\r\n      'isiOS': isiOS,\r\n      'isMobile': isMobile,\r\n      'isFirefox': isFirefox\r\n    };\r\n    return getNavigator;\r\n  };\r\n\r\n  return {\r\n    viewPort: module.viewPort\r\n  };\r\n\r\n})();\r\n","'use strict';\r\n\r\n/**\r\n * @namespace viewstUtils\r\n * @description utilities views (screens)\r\n */\r\n\r\nconst viewsUtils = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  module.renderTemplate = function(_data_, _source_, _container_) {\r\n    let source            = document.getElementById(_source_).innerHTML;\r\n    let template          = Handlebars.compile(source);\r\n    let compiledTemplate  = template(_data_);\r\n    let container         = _container_ || 'argos-main-stage';\r\n\r\n    document.getElementById(container).innerHTML = compiledTemplate;\r\n  };\r\n\r\n  return {\r\n    renderTemplate: module.renderTemplate\r\n  };\r\n\r\n})();\r\n","'use strict';\r\n\r\n/**\r\n * @namespace views\r\n * @description manage templates and controllers lazy load. argos-views-utils.js\r\n */\r\nconst views = (function() {\r\n\r\n  const module    = {};\r\n  const self      = module;\r\n\r\n  module.ctrlsLoaded    = [];\r\n  module.tplsLoaded     = [];\r\n  module.stateSelected  = {};\r\n\r\n  module.loadView = (state)=> {\r\n    let deferred          = Q.defer();\r\n    let len               = 0;\r\n    let stateSelected     = {};\r\n    let scriptsContainer  = document.getElementById('argos-scripts-container');\r\n    let tplsContainer     = document.getElementById('argos-templates-container');\r\n    let allPromisses      = [];\r\n    let currentCtrl       = '';\r\n\r\n    self.ctrlsLoaded    = [];\r\n    self.tplsLoaded     = [];\r\n    self.stateSelected  = {};\r\n\r\n    if ( !scriptsContainer || !tplsContainer ) {\r\n      log.error('nodes for lazy load are mandatory');\r\n    }\r\n\r\n    /* todo: llevar a un método empty() de argosDom */\r\n    while (scriptsContainer.firstChild) {\r\n      currentCtrl = scriptsContainer.firstChild.getAttribute('data-ctrl');\r\n      if ( window.hasOwnProperty(currentCtrl) ) {\r\n        delete window[currentCtrl];\r\n      }\r\n      scriptsContainer.removeChild(scriptsContainer.firstChild);\r\n    }\r\n    while (tplsContainer.firstChild) {\r\n      tplsContainer.removeChild(tplsContainer.firstChild);\r\n    }\r\n    self.stateSelected = router.findRouteByState(state);\r\n\r\n    len = self.stateSelected.controllers.length;\r\n    while(len--) {\r\n      self.loadControllers(state, self.stateSelected.controllers[len]);\r\n    }\r\n\r\n    len = self.stateSelected.templates.length;\r\n    while(len--) {\r\n      allPromisses.push(self.loadTemplates(state, self.stateSelected.templates[len]));\r\n    }\r\n\r\n    Q.all(allPromisses).then( (results)=> {\r\n      self.checkAllReady().then( ()=> {\r\n        let timeout = setTimeout(function() {\r\n          deferred.resolve();\r\n          clearTimeout(timeout);\r\n        }, 50);\r\n      });\r\n    }, (error)=> {\r\n      log.error('error get controller data: '+state);\r\n      deferred.reject();\r\n    });\r\n\r\n    return deferred.promise;\r\n  };\r\n\r\n  module.getNameController  = (controller)=> {\r\n    let ctrlName = controller.split('-');\r\n    let name = ctrlName.shift();\r\n    let i = 0;\r\n    let len = ctrlName.length;\r\n\r\n    for (; i<len; i++) {\r\n      name += ctrlName[i].charAt(0).toUpperCase() + ctrlName[i].slice(1);\r\n    }\r\n    return name;\r\n  };\r\n\r\n  module.loadControllers = (state, controller)=> {\r\n    let nodeScript      = document.createElement('script');\r\n    let controllerName  = self.getNameController(controller);\r\n\r\n    nodeScript.type   = 'text\\/javascript';\r\n    nodeScript.src    = './shell/theme/views/' +  state + '/' + controller + '.js';\r\n    nodeScript.id     = 'js-' + controller;\r\n    nodeScript.onload = self.addCtrlLoaded(controller);\r\n    document.getElementById('argos-scripts-container').appendChild(nodeScript);\r\n    nodeScript.setAttribute('data-ctrl', controllerName);\r\n  };\r\n\r\n  module.loadTemplates = (state, template)=> {\r\n    let req = new XMLHttpRequest();\r\n    let templatePath = './shell/theme/views/' +  state + '/' + template + '.html';\r\n\r\n    req.open('GET', templatePath, true);\r\n\r\n    req.onreadystatechange = function() {\r\n      let templateScript;\r\n      if (req.readyState === 4 && req.status === 200) {\r\n        templateScript = document.createElement('div');\r\n        templateScript.innerHTML = req.responseText;\r\n        document.getElementById('argos-templates-container').appendChild(templateScript);\r\n      }\r\n    };\r\n\r\n    req.send();\r\n  };\r\n\r\n  module.addCtrlLoaded = (controller)=> {\r\n    self.ctrlsLoaded.push(controller);\r\n  };\r\n\r\n  module.checkAllReady = ()=> {\r\n    let deferred  = Q.defer();\r\n    let check     = true;\r\n    let entryCtrl = self.stateSelected.entry.split('.').shift().toString();\r\n\r\n    if ( self.ctrlsLoaded.length === !self.stateSelected.controllers.length ) {\r\n      check = false;\r\n    }\r\n\r\n    if ( check ) {\r\n      deferred.resolve();\r\n    } else {\r\n      self.timer();\r\n    }\r\n\r\n    return deferred.promise;\r\n  };\r\n\r\n  module.timer = ()=> {\r\n    let timeout = setTimeout(function() {\r\n      self.checkAllReady();\r\n      clearTimeout(timeout);\r\n    }, 10);\r\n  };\r\n\r\n  return {\r\n    loadView: module.loadView\r\n  };\r\n\r\n} )();\r\n"],"sourceRoot":"/source/"}